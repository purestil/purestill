<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">

<!-- üåô Universal theme sync -->
<script>
(function(){
  const KEY="purestill-theme";
  const saved=localStorage.getItem(KEY);
  const hour=new Date().getHours();
  const mode=saved||(hour>=19||hour<=5?"dark":"light");
  if(mode==="dark") document.documentElement.classList.add("dark");
})();
</script>

<title>{{TITLE}} | PureStill</title>

<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="{{SUMMARY}}">
<meta name="robots" content="index, follow">
<meta http-equiv="content-language" content="en-us">
<link rel="canonical" href="{{CANONICAL_URL}}">

<meta name="news_keywords" content="{{CATEGORY}}">
<meta property="article:published_time" content="{{DATE}}">
<meta property="article:modified_time" content="{{DATE}}">

<style>
/* ================= THEME ================= */
:root{
  --bg:#ffffff;
  --text:#111111;
  --muted:#6b7280;
  --border:#e5e7eb;
  --card:#fafafa;
  --accent:#c9b26b;
  --accent-hover:#d4af37;
  --reading-width:720px;
}
html.dark{
  --bg:#0e0e10;
  --text:#eae6da;
  --muted:#9ca3af;
  --border:#2a2a2e;
  --card:#16161a;
}

/* ================= BASE ================= */
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  background:var(--bg);
  color:var(--text);
  line-height:1.9;
}
a{color:var(--accent)}
a:hover{color:var(--accent-hover)}

/* ================= HEADER (UNCHANGED) ================= */
header{
  text-align:center;
  padding:26px 0;
  border-bottom:1px solid var(--border);
}
.brand a{
  font-family:"Playfair Display",Georgia,serif;
  font-size:30px;
  font-weight:600;
  letter-spacing:.3px;
  color:var(--text);
  text-decoration:none;
}

/* ================= PROGRESS BAR ================= */
#reading-progress{
  position:fixed;
  top:0;
  left:0;
  height:3px;
  width:0;
  background:var(--accent);
  z-index:9999;
}

/* ================= ARTICLE ================= */
.article-wrap{
  max-width:var(--reading-width);
  margin:0 auto;
  padding:72px 20px 120px;
}
.category{
  font-size:13px;
  color:var(--muted);
  text-transform:uppercase;
  margin-bottom:14px;
}
h1{
  font-family:"Playfair Display",Georgia,serif;
  font-size:clamp(32px,4vw,44px);
  line-height:1.25;
}
.subhead{
  font-size:19px;
  color:var(--muted);
  margin:24px 0 34px;
}
.meta{
  font-size:13px;
  color:var(--muted);
  margin-bottom:42px;
}

/* ‚ú® Paragraph polish */
article{
  font-size:18.8px;
}
article p{
  margin-bottom:30px;
  letter-spacing:.2px;
}
article h2{
  font-family:"Playfair Display",Georgia,serif;
  font-size:1.6em;
  margin:72px 0 26px;
}
article h3{
  font-family:"Playfair Display",Georgia,serif;
  font-size:1.3em;
  margin:56px 0 22px;
}

/* ================= BACK BUTTON ================= */
.back-btn{
  font-size:14px;
  color:var(--muted);
  margin-bottom:28px;
  cursor:pointer;
}
.back-btn:hover{text-decoration:underline}

/* ================= SOURCE ================= */
.source{
  margin-top:64px;
  padding-top:24px;
  border-top:1px solid var(--border);
  font-size:14px;
  color:var(--muted);
}

/* ================= INTERNAL LINKS ================= */
.internal-links{
  margin-top:90px;
  padding-top:44px;
  border-top:1px solid var(--border);
}
.internal-links h2{
  font-family:"Playfair Display",Georgia,serif;
  font-size:22px;
  margin-bottom:28px;
}
.link-list{
  display:grid;
  gap:20px;
}
.link-item a{
  font-size:16px;
  font-weight:600;
  color:var(--text);
  text-decoration:none;
  display:inline-block;
}
.link-item span{
  display:block;
  font-size:13px;
  color:var(--muted);
  margin-top:4px;
}
.link-item a::after{
  content:" ‚Üí";
  opacity:0;
  transition:opacity .2s ease;
}
.link-item a:hover::after{
  opacity:1;
}

/* ================= PAGINATION ================= */
.article-pagination{
  display:flex;
  justify-content:space-between;
  gap:20px;
  margin-top:80px;
  padding-top:32px;
  border-top:1px solid var(--border);
}
.article-pagination a{
  max-width:48%;
  font-size:14px;
  color:var(--text);
  text-decoration:none;
}
.article-pagination span{
  display:block;
  font-size:12px;
  color:var(--muted);
}

/* ================= FOOTER ================= */
footer{
  margin-top:120px;
  padding-top:36px;
  border-top:1px solid var(--border);
  font-size:14px;
  color:var(--muted);
}
footer a{
  margin-right:16px;
  color:var(--muted);
  text-decoration:none;
}
footer a:hover{text-decoration:underline}
</style>
</head>

<body>

<div id="reading-progress"></div>

<header>
  <div class="brand"><a href="/">PureStill</a></div>
</header>

<main class="article-wrap">

<div class="back-btn" onclick="history.back()">‚Üê Back</div>

<div class="category">{{CATEGORY}}</div>
<h1>{{TITLE}}</h1>
<div class="subhead">{{SUMMARY}}</div>
<div class="meta">Published {{DATE}}</div>

<article>
{{CONTENT}}
</article>

{{AD_MID}}

<div class="source" id="sourceBlock">
  <strong>Source:</strong>
  <span class="sources" data-sources="{{SOURCE}}"></span>
</div>

{{AD_BOTTOM}}

<!-- üîó AUTO INTERNAL LINKS -->
<section class="internal-links">
  <h2>More Analysis</h2>
  <div class="link-list" id="autoLinks"></div>
</section>

<!-- üîÅ PREV / NEXT -->
<nav class="article-pagination" id="articlePagination"></nav>

<footer>
  <a href="/about.html">About</a>
  <a href="/privacy-policy.html">Privacy</a>
  <a href="/terms.html">Terms</a>
  <a href="/disclaimer.html">Disclaimer</a>
  <a href="/contact.html">Contact</a><br><br>
  ¬© PureStill
</footer>

</main>

<script>
/* Reading progress */
window.addEventListener("scroll",()=>{
  const h=document.documentElement;
  const p=(h.scrollTop/(h.scrollHeight-h.clientHeight))*100;
  document.getElementById("reading-progress").style.width=p+"%";
});

/* JSON-powered links + pagination */
fetch('/data.json')
.then(r=>r.json())
.then(data=>{
  const articles=data.articles;
  const current=location.pathname;

  const list=document.getElementById('autoLinks');
  articles.filter(a=>a.url!==current).slice(0,3).forEach(a=>{
    const div=document.createElement('div');
    div.className='link-item';
    div.innerHTML=`<a href="${a.url}">${a.title}</a><span>${a.summary}</span>`;
    list.appendChild(div);
  });

  const idx=articles.findIndex(a=>a.url===current);
  const nav=document.getElementById('articlePagination');

  if(idx>0){
    nav.innerHTML+=`<a href="${articles[idx-1].url}">
      <span>‚Üê Previous</span>${articles[idx-1].title}
    </a>`;
  }
  if(idx<articles.length-1){
    nav.innerHTML+=`<a href="${articles[idx+1].url}">
      <span>Next ‚Üí</span>${articles[idx+1].title}
    </a>`;
  }
});
</script>

</body>
</html>
